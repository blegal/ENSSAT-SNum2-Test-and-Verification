<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head>


<meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="generator" content="C++2HTML by Jasper Bedaux"><!-- To generate your own colored code visit http://www.bedaux.net/cpp2html/ -->

<style type="text/css">
.comment { color: #999999; font-style: italic; }
.pre { color: #000099; }
.string { color: #009900; }
.char { color: #009900; }
.float { color: #996600; }
.int { color: #999900; }
.bool { color: #000000; font-weight: bold; }
.type { color: #FF6633; }
.flow { color: #FF0000; }
.keyword { color: #990000; }
.operator { color: #663300; font-weight: bold; }
</style></head><body>
<pre><span class="comment">//# FloatOpr.cpp -- A program to compute floatting point operations 
//#                 between large files.
//#
//#
//#
//# Copyright (C) 2005 Bertrand LE GAL, FRANCE.
//#
//# This program is free software; you can redistribute it and/or modify
//# it under the terms of the GNU General Public License as published by
//# the Free Software Foundation; either version 2 of the License, or
//# (at your option) any later version.
//#
//# This program is distributed in the hope that it will be useful, but
//# WITHOUT ANY WARRANTY; without even the implied warranty of
//# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
//# General Public License for more details.
//#
//# You should have received a copy of the GNU General Public License
//# along with this program; if not, write to the Free Software
//# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
//#
//# Correspondence concerning this software should be addressed as follows:
//# Bertrand LE GAL
//# mailto : bertrand.legal@free.fr
</span><span class="pre">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string&gt;
#include &lt;iostream&gt;
</span><span class="type">
int</span><span class="keyword"> main</span><span class="operator">(</span><span class="type"> int</span> argc<span class="operator">,</span><span class="type"> char</span><span class="operator"> **</span>argv<span class="operator"> ){</span>
	FILE<span class="operator">  *</span>file_1<span class="operator">;</span>
	FILE<span class="operator">  *</span>file_2<span class="operator">;</span><span class="flow">

	if</span><span class="operator">(</span> argc<span class="operator"> !=</span><span class="int"> 4</span><span class="operator"> ){</span>
		printf<span class="operator">(</span><span class="string">"Help :\n"</span><span class="operator">);</span>
		printf<span class="operator">(</span><span class="string">"  ./FloatOpr -[add/sub/mult] FileName_1 FileName_2\n"</span><span class="operator">);</span><span class="flow">
		return</span><span class="operator"> -</span><span class="int">1</span><span class="operator">;
	}</span>

	

	file_1<span class="operator"> =</span> fopen<span class="operator">(</span> argv<span class="operator">[</span><span class="int">2</span><span class="operator">],</span><span class="string"> "r"</span><span class="operator">);</span><span class="flow">
	if</span><span class="operator">(</span> file_1<span class="operator"> ==</span> NULL<span class="operator"> ){</span>
    	printf<span class="operator">(</span><span class="string">"  ERROR : problem opening file (%s)!\n"</span><span class="operator">,</span> argv<span class="operator">[</span><span class="int">2</span><span class="operator">]);
  	}</span>

	file_2<span class="operator"> =</span> fopen<span class="operator">(</span> argv<span class="operator">[</span><span class="int">3</span><span class="operator">],</span><span class="string"> "r"</span><span class="operator">);</span><span class="flow">
	if</span><span class="operator">(</span> file_2<span class="operator"> ==</span> NULL<span class="operator"> ){</span>
    	printf<span class="operator">(</span><span class="string">"  ERROR : problem opening file (%s)!\n"</span><span class="operator">,</span> argv<span class="operator">[</span><span class="int">3</span><span class="operator">]);
  	}</span><span class="type">

	char</span> t1<span class="operator">[</span><span class="int">128</span><span class="operator">];</span><span class="type">
	char</span> t2<span class="operator">[</span><span class="int">128</span><span class="operator">];</span><span class="type">
	char</span><span class="operator">*</span> l1<span class="operator">, *</span>l2<span class="operator">;</span><span class="flow">
	do</span><span class="operator">{</span> 
    	l1<span class="operator"> =</span> fgets<span class="operator">(</span>t1<span class="operator">,</span><span class="int"> 128</span><span class="operator">,</span> file_1<span class="operator">);</span>
    	l2<span class="operator"> =</span> fgets<span class="operator">(</span>t2<span class="operator">,</span><span class="int"> 128</span><span class="operator">,</span> file_2<span class="operator">);</span><span class="flow">
    	if</span><span class="operator">( (</span>l1<span class="operator"> !=</span> NULL<span class="operator">) &amp;&amp; (</span>l2<span class="operator"> !=</span> NULL<span class="operator">) ){</span><span class="flow">
    		if</span><span class="operator">(</span> strcmp<span class="operator">(</span>argv<span class="operator">[</span><span class="int">1</span><span class="operator">],</span><span class="string"> "-add"</span><span class="operator">) ==</span><span class="int"> 0</span><span class="operator"> ){</span><span class="type">
    			float</span> r<span class="operator"> =</span> atof<span class="operator">(</span>t1<span class="operator">) +</span> atof<span class="operator">(</span>t2<span class="operator">);</span>
    			printf<span class="operator">(</span><span class="string">"%f\n"</span><span class="operator">,</span> r<span class="operator">);

    		}</span><span class="flow">else if</span><span class="operator">(</span> strcmp<span class="operator">(</span>argv<span class="operator">[</span><span class="int">1</span><span class="operator">],</span><span class="string"> "-sub"</span><span class="operator">) ==</span><span class="int"> 0</span><span class="operator"> ){</span><span class="type">
    			float</span> r<span class="operator"> =</span> atof<span class="operator">(</span>t1<span class="operator">) -</span> atof<span class="operator">(</span>t2<span class="operator">);</span>
    			printf<span class="operator">(</span><span class="string">"%f\n"</span><span class="operator">,</span> r<span class="operator">);

    		}</span><span class="flow">else if</span><span class="operator">(</span> strcmp<span class="operator">(</span>argv<span class="operator">[</span><span class="int">1</span><span class="operator">],</span><span class="string"> "-mult"</span><span class="operator">) ==</span><span class="int"> 0</span><span class="operator"> ){</span><span class="type">
    			float</span> r<span class="operator"> =</span> atof<span class="operator">(</span>t1<span class="operator">) *</span> atof<span class="operator">(</span>t2<span class="operator">);</span>
    			printf<span class="operator">(</span><span class="string">"%f\n"</span><span class="operator">,</span> r<span class="operator">);

    		}</span><span class="flow">else</span><span class="operator">{</span>
    			printf<span class="operator">(</span><span class="string">"  ERROR : unknow operation (%s)\n"</span><span class="operator">,</span> argv<span class="operator">[</span><span class="int">2</span><span class="operator">]);</span><span class="flow">
    			return</span><span class="operator"> -</span><span class="int">1</span><span class="operator">;
    		}
    	}
	}</span><span class="flow">while</span><span class="operator">( (</span>l1<span class="operator"> !=</span> NULL<span class="operator">) &amp;&amp; (</span>l2<span class="operator"> !=</span> NULL<span class="operator">) );</span><span class="flow">
	
	return</span><span class="int"> 1</span><span class="operator">;
}</span>
</pre>

</body></html>